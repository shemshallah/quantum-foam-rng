<!DOCTYPE html>
<html>
<head>
    <title>Quantum Foam RNG</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="World's first quantum foam-based random number generator">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
    
    <!-- HERO -->
    <div class="min-h-screen flex items-center justify-center px-4">
        <div class="max-w-4xl text-center">
            <div class="text-6xl mb-6">üåä</div>
            <h1 class="text-5xl font-bold mb-6">Quantum Foam RNG</h1>
            <p class="text-xl text-gray-300 mb-8">
                The world's first random number generator using quantum foam fluctuations
            </p>
            
            <!-- LIVE DEMO -->
            <div class="bg-gray-800 p-8 rounded-lg mb-8 max-w-2xl mx-auto">
                <h3 class="text-2xl font-bold mb-4">üé≤ Live Demo</h3>
                <p class="text-gray-400 mb-4 text-sm">
                    This uses REAL quantum hardware. Generation takes 2-3 minutes.
                </p>
                <button id="generateBtn" 
                        class="w-full bg-purple-600 px-6 py-4 rounded-lg font-semibold hover:bg-purple-700 mb-4 disabled:bg-gray-600 disabled:cursor-not-allowed transition">
                    Generate Quantum Key
                </button>
                <div id="result" class="bg-gray-900 p-4 rounded-lg min-h-[150px] font-mono text-xs text-left overflow-x-auto whitespace-pre-wrap"></div>
            </div>
            
            <div class="flex gap-4 justify-center flex-wrap mb-6">
                <a href="https://github.com/shemshallah/quantum-foam-rng" 
                   target="_blank"
                   class="bg-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
                    View on GitHub
                </a>
                <a href="#api-docs" 
                   class="bg-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-600 transition">
                    API Docs
                </a>
            </div>
            
            <div class="bg-gray-800 p-4 rounded-lg inline-block">
                <code class="text-green-400">pip install quantum-foam-rng</code>
            </div>
        </div>
    </div>
    
    <!-- API DOCS -->
    <div id="api-docs" class="max-w-6xl mx-auto px-4 py-20">
        <h2 class="text-3xl font-bold mb-8 text-center">API Documentation</h2>
        
        <div class="grid md:grid-cols-2 gap-6">
            <!-- Generate Key -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-xl font-bold mb-3 text-purple-400">Generate Crypto Key</h3>
                <p class="text-gray-400 mb-3 text-sm">Generate a 256-bit cryptographic key</p>
                <pre class="bg-gray-900 p-3 rounded text-xs overflow-x-auto"><code class="text-green-400">GET /api/v1/key</code></pre>
                <p class="text-gray-500 mt-2 text-xs">No parameters required</p>
            </div>
            
            <!-- Generate Entropy -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-xl font-bold mb-3 text-blue-400">Generate Entropy</h3>
                <p class="text-gray-400 mb-3 text-sm">Generate custom quantum entropy</p>
                <pre class="bg-gray-900 p-3 rounded text-xs overflow-x-auto"><code class="text-green-400">GET /api/v1/generate?bits=256&theta=45</code></pre>
                <p class="text-gray-500 mt-2 text-xs">bits: 1-2048, theta: 0-90</p>
            </div>
            
            <!-- Health -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-xl font-bold mb-3 text-yellow-400">Health Check</h3>
                <p class="text-gray-400 mb-3 text-sm">Check API status</p>
                <pre class="bg-gray-900 p-3 rounded text-xs overflow-x-auto"><code class="text-green-400">GET /health</code></pre>
                <p class="text-gray-500 mt-2 text-xs">Returns service status</p>
            </div>
            
            <!-- Info -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-xl font-bold mb-3 text-cyan-400">API Info</h3>
                <p class="text-gray-400 mb-3 text-sm">Get API information</p>
                <pre class="bg-gray-900 p-3 rounded text-xs overflow-x-auto"><code class="text-green-400">GET /api/v1/info</code></pre>
                <p class="text-gray-500 mt-2 text-xs">Features and pricing</p>
            </div>
        </div>
    </div>
    
    <!-- FEATURES -->
    <div class="max-w-6xl mx-auto px-4 py-20">
        <h2 class="text-3xl font-bold text-center mb-12">Why Quantum Foam?</h2>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="bg-gray-800 p-6 rounded-lg">
                <div class="text-4xl mb-4">üîê</div>
                <h3 class="text-xl font-bold mb-2">Cryptographically Secure</h3>
                <p class="text-gray-400">Perfect for Bitcoin/Ethereum private keys and encryption</p>
            </div>
            <div class="bg-gray-800 p-6 rounded-lg">
                <div class="text-4xl mb-4">üåä</div>
                <h3 class="text-xl font-bold mb-2">Quantum Verified</h3>
                <p class="text-gray-400">Foam coupling œÉ > 0.15 proves quantum origin</p>
            </div>
            <div class="bg-gray-800 p-6 rounded-lg">
                <div class="text-4xl mb-4">‚ö°</div>
                <h3 class="text-xl font-bold mb-2">Easy to Use</h3>
                <p class="text-gray-400">Simple API. Works with any quantum backend</p>
            </div>
        </div>
    </div>
    
    <!-- FOOTER -->
    <div class="bg-gray-800 py-8 mt-20">
        <div class="max-w-6xl mx-auto px-4 text-center text-gray-400">
            <p>Made with üíô by quantum researchers</p>
            <p class="mt-2 text-sm">
                <a href="https://github.com/shemshallah/quantum-foam-rng" class="hover:text-white">GitHub</a> ‚Ä¢
                <a href="mailto:hello@quantum-foam-rng.com" class="hover:text-white">Contact</a>
            </p>
        </div>
    </div>
    
    <script>
        const btn = document.getElementById('generateBtn');
        const result = document.getElementById('result');
        
        async function pollJobStatus(jobId) {
            const maxAttempts = 60; // 5 minutes max (5 second intervals)
            let attempts = 0;
            
            while (attempts < maxAttempts) {
                try {
                    const response = await fetch(`/api/v1/job/${jobId}`);
                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.error || 'Job check failed');
                    }
                    
                    if (data.status === 'completed') {
                        return data.result;
                    }
                    
                    if (data.status === 'failed') {
                        throw new Error(data.error || 'Job failed');
                    }
                    
                    // Update progress message
                    const elapsed = attempts * 5;
                    result.innerHTML = `<span class="text-yellow-400">‚è≥ Quantum circuits running...</span>

Status: ${data.status}
Elapsed: ${elapsed}s / ~180s

<span class="text-cyan-400">üî¨ Running Bell state measurements across 9 bases</span>
<span class="text-cyan-400">üåä Extracting quantum foam entropy</span>
<span class="text-cyan-400">üìä Measuring foam coupling strength</span>

<span class="text-gray-500">The IonQ simulator is processing your quantum circuits.
This takes 2-3 minutes - real quantum hardware at work!</span>`;
                    
                    // Wait 5 seconds before next poll
                    await new Promise(resolve => setTimeout(resolve, 5000));
                    attempts++;
                    
                } catch (error) {
                    throw error;
                }
            }
            
            throw new Error('Timeout: Job took longer than expected');
        }
        
        btn.addEventListener('click', async () => {
            // Disable button
            btn.disabled = true;
            btn.textContent = '‚è≥ Processing... (2-3 min)';
            
            // Show initial message
            result.innerHTML = '<span class="text-yellow-400">‚è≥ Creating quantum job...</span>\n\nInitializing IonQ simulator...\n\n<span class="text-gray-500">This will take 2-3 minutes</span>';
            
            try {
                // Step 1: Create job
                const createResponse = await fetch('/api/v1/key', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!createResponse.ok) {
                    const errorText = await createResponse.text();
                    throw new Error(`HTTP ${createResponse.status}: ${errorText}`);
                }
                
                const createData = await createResponse.json();
                
                if (!createData.success) {
                    throw new Error(createData.error || 'Failed to create job');
                }
                
                result.innerHTML = `<span class="text-green-400">‚úì Job created: ${createData.job_id}</span>\n\n<span class="text-yellow-400">‚è≥ Starting quantum processing...</span>\n\n<span class="text-gray-500">Estimated time: 2-3 minutes</span>`;
                
                // Step 2: Poll for results
                const keyResult = await pollJobStatus(createData.job_id);
                
                // Step 3: Display results
                result.innerHTML = `<span class="text-green-400">‚úì SUCCESS! Generated from quantum hardware!</span>

<span class="text-blue-300">PRIVATE KEY:</span>
${keyResult.private_key}

<span class="text-purple-300">FOAM STRENGTH:</span> œÉ = ${keyResult.foam_strength.toFixed(4)}
<span class="text-gray-400">DEVICE:</span> ${keyResult.device}
<span class="text-gray-400">TIME:</span> ${keyResult.generation_time_sec.toFixed(1)}s
<span class="text-gray-400">RATE:</span> ${keyResult.bits_per_second.toFixed(1)} bits/sec
<span class="text-gray-400">SHOTS:</span> ${keyResult.total_shots}

<span class="text-yellow-300">‚ú® Generated from REAL quantum measurements on IonQ simulator!</span>

<span class="text-gray-500">This key came from ${keyResult.n_bases} different quantum basis measurements,
capturing genuine quantum foam fluctuations with foam coupling œÉ=${keyResult.foam_strength.toFixed(4)}.</span>`;
                
            } catch (error) {
                result.innerHTML = `<span class="text-red-400">‚ùå ERROR</span>\n\n${error.message}\n\n<span class="text-gray-500">Please try again or contact support if the issue persists.</span>`;
                console.error('Error:', error);
            } finally {
                // Re-enable button
                btn.disabled = false;
                btn.textContent = 'Generate Quantum Key';
            }
        });
        
        // Test API on load
        fetch('/health')
            .then(r => r.json())
            .then(data => {
                console.log('API Health:', data);
                if (data.quantum_available) {
                    console.log('‚úì Quantum hardware available');
                } else {
                    console.warn('‚ö†Ô∏è Quantum hardware not available');
                }
            })
            .catch(e => console.error('API Health Check Failed:', e));
    </script>
    
</body>
</html>
